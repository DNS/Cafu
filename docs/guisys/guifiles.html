
<h1 class="sectionedit1" id="gui_files_explained">GUI Files Explained</h1>
<div class="level1">



<p>
Each <abbr title="Graphical User Interface">GUI</abbr> comprises several files on disk, such as the <abbr title="Graphical User Interface">GUI</abbr> scripts, material definition files, and texture images.
</p>

<p>
<abbr title="Graphical User Interface">GUI</abbr> files can be created with the <abbr title="Graphical User Interface">GUI</abbr> Editor, written by hand, or a combination of those:
</p>
<ul>
<li class="level1"><div class="li"> The <abbr title="Graphical User Interface">GUI</abbr> Editor allows users to define and design the contents and layout of the windows that compose a <abbr title="Graphical User Interface">GUI</abbr>. However, the work in the <abbr title="Graphical User Interface">GUI</abbr> Editor is focused mainly on static aspects like window position and size, texts, colors, borders, etc.</div>
</li>
<li class="level1"><div class="li"> Everything “dynamic” and all sorts of effects can, by their nature, not be added by means of the <abbr title="Graphical User Interface">GUI</abbr> Editor, but must be written as custom, hand-crafted script code that augments the script that is auto-generated by the <abbr title="Graphical User Interface">GUI</abbr> Editor each time the “static” part of the <abbr title="Graphical User Interface">GUI</abbr> is saved.</div>
</li>
</ul>

<p>
One key question addressed in this section is how we can combine hand-crafted script code and editor-edited script code, while keeping both separated so that they don&#039;t overwrite each other.
</p>

<p>
In general, when you save a <abbr title="Graphical User Interface">GUI</abbr> in the <abbr title="Graphical User Interface">GUI</abbr> Editor, the editor creates or re-creates some of the files it is composed of, updates others, and leaves alone the rest.
The result is normally exactly what you want and expect, but sometimes you may wish to or must hand-tune the details (such as the <abbr title="Graphical User Interface">GUI</abbr> scripts or material definitions) without and independently of the <abbr title="Graphical User Interface">GUI</abbr> Editor.
In such cases, it is very helpful to understand the files that belong to a <abbr title="Graphical User Interface">GUI</abbr>.
</p>

<p>
This section explains the files that together form a <abbr title="Graphical User Interface">GUI</abbr>, how they relate to each other, and how hand-crafted and editor-created scripts can peacefully coexist.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;GUI Files Explained&quot;,&quot;hid&quot;:&quot;gui_files_explained&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-1662&quot;} -->
<h2 class="sectionedit2">One directory per GUI</h2>
<div class="level2">

<p>
Although not a technical requirement and not enforced by the Cafu <abbr title="Graphical User Interface">GUI</abbr> code (and in fact, at the time of this writing, not yet implemented by the example GUIs that ship with Cafu), it is highly recommended to save each <abbr title="Graphical User Interface">GUI</abbr> in a directory of its own. This
</p>
<ul>
<li class="level1"><div class="li"> explicitly groups all files that logically form and belong to the <abbr title="Graphical User Interface">GUI</abbr>, and</div>
</li>
<li class="level1"><div class="li"> makes packaging a complete <abbr title="Graphical User Interface">GUI</abbr> in a <code>my_<abbr title="Graphical User Interface">GUI</abbr>.zip</code> archive possible, so that the <abbr title="Graphical User Interface">GUI</abbr> can easily and safely be distributed, shipped and handled.</div>
</li>
</ul>

<p>
The name of the directory should match the file name of the <abbr title="Graphical User Interface">GUI</abbr>. That is, if your <abbr title="Graphical User Interface">GUI</abbr>&#039;s file names are <code>CallLift_init.cgui</code> and <code>CallLift_main.cgui</code>, it should be stored in a directory with the same name <code>CallLift/</code> (or in a zip archive with the same base name <code>CallLift.zip</code>).
</p>

<p>
Note that when you are saving a new <abbr title="Graphical User Interface">GUI</abbr> that does not yet have a separate directory, you can use the “New Folder” button (or right-click context menu) of the “Save” dialog to create such new directories as required.
</p>



</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;One directory per GUI&quot;,&quot;hid&quot;:&quot;one_directory_per_gui&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;1663-2912&quot;} -->
<h2 class="sectionedit3">cgui GUI definition files</h2>
<div class="level2">

<p>
The <code>cgui</code> files are the core files of the <abbr title="Graphical User Interface">GUI</abbr>:
They contain the definitions for the positions, sizes, colors, texts, effects, animations, hierarchy and other properties of the windows that form the <abbr title="Graphical User Interface">GUI</abbr>.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;cgui GUI definition files&quot;,&quot;hid&quot;:&quot;cgui_gui_definition_files&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;2913-3159&quot;} -->
<h3 class="sectionedit4">cgui files are Lua scripts</h3>
<div class="level3">

<p>
The Cafu Engine and the <abbr title="Graphical User Interface">GUI</abbr> Editor load <code>cgui</code> files as <a href="http://www.lua.org/" class="urlextern" title="http://www.lua.org/" rel="nofollow">Lua</a> scripts, and as such they can be inspected or edited in a text editor.
</p>

<p>
The <abbr title="Graphical User Interface">GUI</abbr> Editor is usually used to create and edit the static aspects of <abbr title="Graphical User Interface">GUI</abbr> windows, automatically generating the related script code when saving the file.
Dynamic aspects like animations or other kinds of effects typically require adding custom script code, so editing <code>cgui</code> files (usually the <code>_main.cgui</code> file) is something that you&#039;ll likely want to do often.
</p>

<p>
See the <a href="http://api.cafu.de/lua/" class="urlextern" title="http://api.cafu.de/lua/" rel="nofollow">Lua Scripting Overview</a> and the <a href="http://api.cafu.de/lua/group__GUI.html" class="urlextern" title="http://api.cafu.de/lua/group__GUI.html" rel="nofollow">GUI Scripting Reference Documentation</a> for more details.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;cgui files are Lua scripts&quot;,&quot;hid&quot;:&quot;cgui_files_are_lua_scripts&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;3160-3893&quot;} -->
<h3 class="sectionedit5">Augmenting GUI Editor scripts with custom script code</h3>
<div class="level3">

<p>
For one <abbr title="Graphical User Interface">GUI</abbr> there is usually a <em>pair</em> of <code>cgui</code> files, one suffixed <code>_init.cgui</code> and one suffixed <code>_main.cgui</code>. For example:
</p>
<pre class="code dos">d:\Dev\Cafu\Games\DeathMatch\GUIs<span class="sy0">&gt;</span> <a href="http://www.ss64.com/nt/dir.html"><span class="kw3">dir</span></a> Teleporter\*.cgui
Teleporter_init.cgui
Teleporter_main.cgui</pre>

<p>
The <code>_main.cgui</code> file is for your hand-written <abbr title="Graphical User Interface">GUI</abbr> script code, if any, and is never touched or overwritten by the <abbr title="Graphical User Interface">GUI</abbr> Editor (with one exception, see below).
</p>

<p>
The <abbr title="Graphical User Interface">GUI</abbr> Editor also writes a secondary <code>cgui</code> file whose name ends with <code>_init.cgui</code>. This file is written anew each time the <abbr title="Graphical User Interface">GUI</abbr> is saved, and contains <abbr title="Graphical User Interface">GUI</abbr> window definitions whose script code was not hand-crafted, but who were created or edited in the <abbr title="Graphical User Interface">GUI</abbr> Editor.

</p>

<p>
The two <code>cgui</code> files are linked as follows:
When the Cafu code loads a <abbr title="Graphical User Interface">GUI</abbr>, it opens the <code>_main.cgui</code> file (<code>Teleporter_main.cgui</code>). This file contains a statement like
</p>
<pre class="code lua"><span class="co1">-- Include the GUI Editor generated file.</span>
<span class="kw3">dofile</span><span class="br0">&#40;</span><span class="st0">&quot;Games/DeathMatch/GUIs/Teleporter/Teleporter_init.cgui&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">-- Add your hand-written custom code below this line.</span>
<span class="co1">-- ...</span></pre>

<p>
in order to include and process the secondary <code>_init.cgui</code> along with the main file.
</p>

<p>
The only exception when the <abbr title="Graphical User Interface">GUI</abbr> Editor touches the main <code>Teleporter_main.<abbr title="Cafu material script file.">cmat</abbr></code> file is when the file does not yet exist, or doesn&#039;t contain the <code>dofile()</code> reference to the init file. In this case, the <code>_main.cgui</code> would not be loaded at all, and thus the <abbr title="Graphical User Interface">GUI</abbr> Editor inserts the <code>dofile()</code> line into the <code>_main.cgui</code> file.
</p>

<p>
In summary, the goal of keeping two separate <code>cgui</code> files that are linked as described above is to keep your hand-crafted <abbr title="Graphical User Interface">GUI</abbr> script code and the <abbr title="Graphical User Interface">GUI</abbr> Editor edited window definitions cleanly separated, without any danger of one overwriting the other:
</p>
<ul>
<li class="level1"><div class="li"> When you edit your <abbr title="Graphical User Interface">GUI</abbr> in the <abbr title="Graphical User Interface">GUI</abbr> Editor, you only load and save file <code>Teleporter_init.cgui</code>.</div>
</li>
<li class="level1"><div class="li"> All hand-written code enters file <code>Teleporter_main.cgui</code> instead.</div>
</li>
<li class="level1"><div class="li"> The connection between the two files is made by the <code>dofile()</code> statement.</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Augmenting GUI Editor scripts with custom script code&quot;,&quot;hid&quot;:&quot;augmenting_gui_editor_scripts_with_custom_script_code&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;3894-6062&quot;} -->
<h2 class="sectionedit6">cmat material definition files</h2>
<div class="level2">

<p>
The <code><abbr title="Cafu material script file.">cmat</abbr></code> files contain the material definitions for the graphical elements of this <abbr title="Graphical User Interface">GUI</abbr>.
</p>

<p>
At the time of this writing, the materials for GUIs are still defined in the “global” material scripts for the <abbr title="MODification, a self-contained game for the Cafu Engine">MOD</abbr>, but for the future we intend to have separate material scripts for each <abbr title="Graphical User Interface">GUI</abbr> that work analogous to <a href="http://docs.cafu.de/modeleditor:modelfiles#cmat_material_definition_files" class="urlextern" title="http://docs.cafu.de/modeleditor:modelfiles#cmat_material_definition_files" rel="nofollow">cmat material definition files</a> for models.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;cmat material definition files&quot;,&quot;hid&quot;:&quot;cmat_material_definition_files&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:6,&quot;range&quot;:&quot;6063-6537&quot;} -->
<h2 class="sectionedit7">Texture images</h2>
<div class="level2">

<p>
The texture images are referenced from the material definition scripts.
See the documentation about <a href="http://docs.cafu.de/#the_cafu_material_system" class="urlextern" title="http://docs.cafu.de/#the_cafu_material_system" rel="nofollow">the Cafu Material System</a> for more details.
</p>



</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Texture images&quot;,&quot;hid&quot;:&quot;texture_images&quot;,&quot;codeblockOffset&quot;:2,&quot;secid&quot;:7,&quot;range&quot;:&quot;6538-&quot;} -->