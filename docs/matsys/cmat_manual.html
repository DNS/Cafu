
<h1 class="sectionedit1" id="the_materials_cmat_files_manual">The Materials (cmat files) Manual</h1>
<div class="level1">

<p>
Cafu materials are defined in <em>material script files</em>, which in turn are simple <abbr title="American Standard Code for Information Interchange">ASCII</abbr> text files with file name suffix <code>.<abbr title="Cafu material script file.">cmat</abbr></code>. This page describes how such “<abbr title="Cafu material script file.">cmat</abbr> scripts” can be written, their syntax and semantics.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;The Materials (cmat files) Manual&quot;,&quot;hid&quot;:&quot;the_materials_cmat_files_manual&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-271&quot;} -->
<h1 class="sectionedit2" id="matsys_cmat_manual_overview">Overview</h1>
<div class="level1">

<p>
First of all, here is a simple example for a material definition script. It was taken from the <code>Cafu-9.06/Games/DeathMatch/Materials/Kai.<abbr title="Cafu material script file.">cmat</abbr></code> file, which also contains several other, very similar material definitions:
</p>
<pre class="code">    Textures/Kai/3r_metpan01        // Material definitions start with the material name.
    {
        diffusemap  Textures/Kai/3r_metpan01_diff.png     // This line says which texture is used as diffuse-map.
        normalmap   Textures/Kai/3r_metpan01_norm.png
        specularmap Textures/Kai/3r_metpan01_spec.png
        lightmap    $lightmap
    }</pre>

<p>
Before we dig into the details about keywords and structure of such material definitions, here are some general properties of <abbr title="Cafu material script file.">cmat</abbr> files:
</p>
<ul>
<li class="level1"><div class="li"> <abbr title="Cafu material script file.">cmat</abbr> files are simple <abbr title="American Standard Code for Information Interchange">ASCII</abbr> text files, containing material definition scripts. Their file name ends with <code>.<abbr title="Cafu material script file.">cmat</abbr></code>.</div>
</li>
<li class="level1"><div class="li"> All statements in such files are <em>case-sensitive</em>. That means that <code>text</code> and <code>Text</code> are <em>not</em> the same. This is also true for filenames, like the <code>Textures/Kai/3r_metpan01_diff.png</code> filename above, because some operating systems like Linux have a case-sensitive file-system.</div>
</li>
<li class="level1"><div class="li"> C++ style comments are allowed in material scripts:  <code>// This is a comment.</code></div>
</li>
<li class="level1"><div class="li"> The <abbr title="Cafu material script file.">cmat</abbr> files for <abbr title="MODification, a self-contained game for the Cafu Engine">MOD</abbr> “MyMOD” are all stored in the <code>Cafu-9.06/Games/MyMOD/Materials/</code> directory and its subdirectories. This is necessary because the Cafu engine automatically scans this directory for material scripts whenever <abbr title="MODification, a self-contained game for the Cafu Engine">MOD</abbr> “MyMOD” is run.</div>
</li>
<li class="level1"><div class="li"> Tokens in <abbr title="Cafu material script file.">cmat</abbr> files are separated by white-space and these individual characters: <code>( { [ ] } ) ,</code></div>
</li>
<li class="level1"><div class="li"> Quoted tokens are recognized. That is, everything between two <code>&quot;...&quot;</code> is considered as one statement, even if white-space or one of the above characters is inside it. That means, if for example you <em>really</em> want to have a material name like <code>my(new and cool)material</code>, then you have to enclose it in quotation marks like this: <code>&quot;my(new and cool)material&quot;</code> in order to account for both the white-space and the brackets. Using quotation marks is not recommended, though! They&#039;re mostly useful if somebody created textures with weird file names like for example <code>&quot;{_SomeFile.bmp&quot;</code>. Write <code>MyNewAndCoolMaterial</code> or <code>My/New/And/Cool/Material</code> or something similar for your material names instead.</div>
</li>
</ul>

<p>
Material definitions always start with the <strong>material name</strong>. In the example above, that&#039;s <code>Textures/Kai/3r_metpan01</code>. You can name materials almost anything you like. If you want to use white-space, commas or brackets in their name, you&#039;ll have to put the name into quotation marks as mentioned above. However, it is important that the name is <em>unique</em>. If the same material name appears again in any other <abbr title="Cafu material script file.">cmat</abbr> file of the same <abbr title="MODification, a self-contained game for the Cafu Engine">MOD</abbr>, the engine will use only the first occurance, so the chances are 50:50 that your material wins over the other.
Most materials that come with Cafu have a filename that roughly resembles the name of its texture image files. That is often a helpful hint for conveniently working with the material, but by no means a requirement.
</p>

<p>
The <strong>body</strong> of the material definition is enclosed in a pair of <code>{ … }</code>.
In many cases, it will only contain a few texture map specification statements like in the example above.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Overview&quot;,&quot;hid&quot;:&quot;overview&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;272-&quot;} -->